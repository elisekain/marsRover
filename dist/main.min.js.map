{"version":3,"sources":["../js/api.js","../js/main.js","../js/utils.js"],"names":[],"mappings":"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","file":"main.min.js","sourcesContent":["const API_BASE = \"https://api.nasa.gov/mars-photos/api/v1\",\n\tAPI_KEY = `api_key=${window.API_KEY ? window.API_KEY : \"DEMO_KEY\"}`;\n\nfunction requestPhotos(e) {\n\te.preventDefault();\n\tclearTable();\n\tlet rover = e.target[0].value,\n\t\tearthDate = e.target[1].value;\n\n\tif (!earthDate) return showErrorMsg(\"No Earth Date Selected\");\n\tspinnerOn();\n\n\t// Call Mars Rover API for photos\n\tfetch(`${API_BASE}/rovers/${rover}/photos?earth_date=${earthDate}&page=1&${API_KEY}`)\n\t\t.then(function(response) {\n\t\t\treturn response.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tspinnerOff();\n\t\t\tif (response.photos) {\n\t\t\t\treturn response;\n\t\t\t}\n\n\t\t\tthrow new Error(\n\t\t\t\tresponse.error ? response.error.message : \"Network response was not ok\"\n\t\t\t);\n\t\t})\n\t\t.then(function(response) {\n\t\t\tconstructTable(response.photos, rover, earthDate);\n\t\t})\n\t\t.catch(function(error) {\n\t\t\tspinnerOff();\n\t\t\tshowErrorMsg(`Error from Mars Rover API: <span>${error.message}</span>`);\n\t\t\tconsole.log(`Error: ${error.message}`);\n\t\t});\n}\n\nfunction requestManifests(rovers, calendar) {\n\tObject.keys(rovers).map(function(rover) {\n\t\t// Call Mars Rover API for manifests\n\t\tfetch(`${API_BASE}/manifests/${rover}/?${API_KEY}`)\n\t\t\t.then(function(response) {\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tif (response.photo_manifest) {\n\t\t\t\t\treturn response;\n\t\t\t\t}\n\n\t\t\t\tthrow new Error(\n\t\t\t\t\tresponse.error ? response.error.message : \"Network response was not ok\"\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tlet info = response.photo_manifest;\n\t\t\t\trovers[rover] = {\n\t\t\t\t\tminDate: info.landing_date,\n\t\t\t\t\tmaxDate: info.max_date\n\t\t\t\t};\n\n\t\t\t\tif (rover === document.getElementById(\"rovers\").value) {\n\t\t\t\t\tsetDateRange(null, rover, calendar, rovers);\n\t\t\t\t\tlet roverName = rover.replace(/\\w\\S*/g, capitalizeWord),\n\t\t\t\t\t\tformattedDate = calendar.formatDate(\n\t\t\t\t\t\t\tcalendar.parseDate(rovers[rover].maxDate),\n\t\t\t\t\t\t\t\"F j, Y\"\n\t\t\t\t\t\t);\n\n\t\t\t\t\tdocument.getElementById(\"suggestedSearch\").innerHTML = `\n\t\t\t\t\t\tTry searching for\n\t\t\t\t\t\t<span>${roverName}</span> on \n\t\t\t\t\t\t<span>${formattedDate}</span>\n\t\t\t\t\t`;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tshowErrorMsg(`Error from Mars Rover API: <span>${error.message}</span>`);\n\t\t\t\tconsole.log(`Error: ${error.message}`);\n\t\t\t});\n\t});\n\n\treturn rovers;\n}\n","document.addEventListener(\"DOMContentLoaded\", function() {\n\t// Initialize datepicker with default min/max dates\n\tlet today = new Date();\n\tlet calendar = flatpickr(\"#earthDate\", {\n\t\taltInput: true,\n\t\tminDate: new Date(\"January 1, 2004 0:0:00\"),\n\t\tmaxDate: today\n\t});\n\n\t// Retrieve & store min/max dates for each rover\n\tlet rovers = {\n\t\tcuriosity: null,\n\t\topportunity: null,\n\t\tspirit: null\n\t};\n\n\trovers = requestManifests(rovers, calendar);\n\n\t// Set up event listeners\n\tdocument.getElementById(\"searchForPhotos\").addEventListener(\"submit\", requestPhotos);\n\tdocument.getElementById(\"marsRoverSVG\").addEventListener(\"click\", activateRover);\n\tdocument.getElementById(\"rovers\").addEventListener(\"change\", function(e) {\n\t\tsetDateRange(e, null, calendar, rovers);\n\t});\n});\n","function capitalizeWord(w) {\n\treturn w.charAt(0).toUpperCase() + w.substr(1);\n}\n\nfunction showErrorMsg(error) {\n\tlet errorMsg = document.getElementById(\"errorMsg\");\n\terrorMsg.innerHTML = error;\n\terrorMsg.style.display = \"block\";\n}\n\nfunction hideErrorMsg() {\n\tlet errorMsg = document.getElementById(\"errorMsg\");\n\terrorMsg.style.display = \"none\";\n}\n\nfunction clearTable() {\n\thideErrorMsg();\n\tlet table = document.getElementById(\"photoTable\");\n\tlet blankState = document.getElementById(\"blankState\");\n\n\ttable.style.display = \"none\";\n\tblankState.style.display = \"block\";\n}\n\nfunction constructTable(photos, rover, earthDate) {\n\t// If no photos found, show error message\n\tif (!photos.length) {\n\t\trover = rover.replace(/\\w\\S*/g, capitalizeWord);\n\n\t\tlet errorMsg = `\n\t\t\tNo Photos Found for \n\t\t\t<span>${rover}</span> on \n\t\t\t<span>${earthDate}</span>\n\t\t`;\n\n\t\treturn showErrorMsg(errorMsg);\n\t}\n\n\t// Otherwise, construct table of photos\n\tlet table = document.getElementById(\"photoTable\");\n\tlet tableBody = document.getElementById(\"photoTableBody\");\n\tlet blankState = document.getElementById(\"blankState\");\n\ttableBody.innerHTML = \"\";\n\n\tphotos.map(function(photo) {\n\t\ttableBody.innerHTML += `\n\t\t<tr>\n\t\t\t<td class=\"col-4\">${photo.id}</td>\n\t\t\t<td class=\"col-4\">${photo.sol}</td>\n\t\t\t<td class=\"col-4\">\n\t\t\t\t<a href=${photo.img_src} target=\"_blank\">\n\t\t\t\t\t<img src=${photo.img_src} alt=\"${rover} rover picture ${photo.id}\"/>\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t</tr>\n\t\t`;\n\t});\n\n\ttable.style.display = \"table\";\n\tblankState.style.display = \"none\";\n}\n\nfunction setDateRange(e, roverName, calendar, rovers) {\n\tif (e) roverName = e.target.value;\n\tif (!roverName) return;\n\n\t// Based on rover manifest, set minDate, maxDate and date selected\n\tcalendar.set(\"minDate\", new Date(rovers[roverName].minDate).fp_incr(1));\n\tcalendar.set(\"maxDate\", new Date(rovers[roverName].maxDate).fp_incr(1));\n\tcalendar.setDate(new Date(rovers[roverName].maxDate).fp_incr(1));\n}\n\nfunction spinnerOn() {\n\tdocument.getElementById(\"searchIcon\").style.display = \"none\";\n\tdocument.getElementById(\"loadIcon\").style.display = \"inline-block\";\n}\n\nfunction spinnerOff() {\n\tdocument.getElementById(\"searchIcon\").style.display = \"inline-block\";\n\tdocument.getElementById(\"loadIcon\").style.display = \"none\";\n}\n\nfunction activateRover() {\n\tlet original = document.getElementById(\"marsRoverSVG\"),\n\t\tdupe = document.getElementById(\"marsRoverDupe\");\n\n\t// No double clicks\n\tif (original.classList.contains(\"hideRover\")) {\n\t\treturn;\n\t}\n\n\toriginal.classList.add(\"hideRover\");\n\tdupe.classList.add(\"moveIt\");\n\n\tsetTimeout(function() {\n\t\toriginal.classList.remove(\"hideRover\");\n\t\tdupe.classList.remove(\"moveIt\");\n\t}, 5000);\n}\n"]}