"use strict";var API_BASE="https://api.nasa.gov/mars-photos/api/v1",API_KEY="api_key="+(window.API_KEY?window.API_KEY:"DEMO_KEY");function requestPhotos(a){a.preventDefault(),clearTable();var b=a.target[0].value,c=a.target[1].value;return c?void(spinnerOn(),fetch(API_BASE+"/rovers/"+b+"/photos?earth_date="+c+"&page=1&"+API_KEY).then(function(a){return a.json()}).then(function(a){if(spinnerOff(),a.photos)return a;throw new Error(a.error?a.error.message:"Network response was not ok")}).then(function(a){constructTable(a.photos,b,c)}).catch(function(a){spinnerOff(),showErrorMsg("Error from Mars Rover API: <span>"+a.message+"</span>"),console.log("Error: "+a.message)})):showErrorMsg("No Earth Date Selected")}function requestManifests(a,b){return Object.keys(a).map(function(c){fetch(API_BASE+"/manifests/"+c+"/?"+API_KEY).then(function(a){return a.json()}).then(function(a){if(a.photo_manifest)return a;throw new Error(a.error?a.error.message:"Network response was not ok")}).then(function(d){var e=d.photo_manifest;if(a[c]={minDate:e.landing_date,maxDate:e.max_date},c===document.getElementById("rovers").value){setDateRange(null,c,b,a);var f=c.replace(/\w\S*/g,capitalizeWord),g=b.formatDate(b.parseDate(a[c].maxDate),"F j, Y");document.getElementById("suggestedSearch").innerHTML="\n\t\t\t\t\t\tTry searching for\n\t\t\t\t\t\t<span>"+f+"</span> on \n\t\t\t\t\t\t<span>"+g+"</span>\n\t\t\t\t\t"}}).catch(function(a){showErrorMsg("Error from Mars Rover API: <span>"+a.message+"</span>"),console.log("Error: "+a.message)})}),a}
"use strict";document.addEventListener("DOMContentLoaded",function(){var a=new Date,b=flatpickr("#earthDate",{altInput:!0,minDate:new Date("January 1, 2004 0:0:00"),maxDate:a}),c={curiosity:null,opportunity:null,spirit:null};c=requestManifests(c,b),document.getElementById("searchForPhotos").addEventListener("submit",requestPhotos),document.getElementById("marsRoverSVG").addEventListener("click",activateRover),document.getElementById("rovers").addEventListener("change",function(a){setDateRange(a,null,b,c)})});
"use strict";function capitalizeWord(a){return a.charAt(0).toUpperCase()+a.substr(1)}function showErrorMsg(a){var b=document.getElementById("errorMsg");b.innerHTML=a,b.style.display="block"}function hideErrorMsg(){var a=document.getElementById("errorMsg");a.style.display="none"}function clearTable(){hideErrorMsg();var a=document.getElementById("photoTable"),b=document.getElementById("blankState");a.style.display="none",b.style.display="block"}function constructTable(a,b,c){if(!a.length){b=b.replace(/\w\S*/g,capitalizeWord);var g="\n\t\t\tNo Photos Found for \n\t\t\t<span>"+b+"</span> on \n\t\t\t<span>"+c+"</span>\n\t\t";return showErrorMsg(g)}var d=document.getElementById("photoTable"),e=document.getElementById("photoTableBody"),f=document.getElementById("blankState");e.innerHTML="",a.map(function(a){e.innerHTML+="\n\t\t<tr>\n\t\t\t<td class=\"col-4\">"+a.id+"</td>\n\t\t\t<td class=\"col-4\">"+a.sol+"</td>\n\t\t\t<td class=\"col-4\">\n\t\t\t\t<a href="+a.img_src+" target=\"_blank\">\n\t\t\t\t\t<img src="+a.img_src+" alt=\""+b+" rover picture "+a.id+"\"/>\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t</tr>\n\t\t"}),d.style.display="table",f.style.display="none"}function setDateRange(a,b,c,d){a&&(b=a.target.value);b&&(c.set("minDate",new Date(d[b].minDate).fp_incr(1)),c.set("maxDate",new Date(d[b].maxDate).fp_incr(1)),c.setDate(new Date(d[b].maxDate).fp_incr(1)))}function spinnerOn(){document.getElementById("searchIcon").style.display="none",document.getElementById("loadIcon").style.display="inline-block"}function spinnerOff(){document.getElementById("searchIcon").style.display="inline-block",document.getElementById("loadIcon").style.display="none"}function activateRover(){document.getElementById("marsRoverSVG").classList.add("hideRover"),document.getElementById("marsRoverDupe").classList.add("moveIt"),setTimeout(function(){document.getElementById("marsRoverSVG").classList.remove("hideRover"),document.getElementById("marsRoverDupe").classList.remove("moveIt")},5e3)}

//# sourceMappingURL=main.min.js.map